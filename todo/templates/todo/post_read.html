{% extends 'todo/footer.html' %}


{% block main_content %}
<link rel="stylesheet" href="/static/css/glightbox.css" />


<div class="container p-2 p-sm-5 rounded bg-white-75 shadow-sm">
    <h1 class="text-primary h3">{{ project.title }}</h1>

    <p>{{ project.description }}</p>
    <div class="">
        {% for img in album %}
        <a href="/media/photos/{{ project.id }}/{{ img }}.jpg" class="glightbox">
            <img src="/media/photos/{{ project.id }}/{{ img }}.thumbnail" alt="wwbb.ru image" />
        </a>            
        {% endfor %}
    </div>

    <!-- TAGS -->
    <div class="mt-3">
        <span >теги:&nbsp;</span>
        {% for i in tags %}
        <a href="/tag/{{ i }}" class="btn btn-sm btn-outline-secondary ">{{ i }}</a>
        {% endfor %}
    </div>
    <hr>
    <div class="container">
        <div class="row justify-content-between">
            <a class="btn btn-outline-primary col col-sm-3 p-1 mx-1" href="/post/{{prev}}">&#60;&#60; назад</a>
            {% if user.is_authenticated %}
            <a class="btn btn-danger col col-sm-3 p-1 mx-1" href="/update/{{ project.id }}">изменить</a>
            {% endif %}
            <a class="btn btn-outline-primary col col-sm-3 p-1 mx-1" href="/post/{{next}}">вперёд &#62;&#62;</a>
        </div>
    </div>
</div>
<script src="/static/js/glightbox.js"></script>

<script>
    var lightbox = GLightbox();
    lightbox.on('open', (target) => {
        // console.log('lightbox opened');
    });
    var lightboxDescription = GLightbox({
        selector: '.glightbox2'
    });
    var lightboxVideo = GLightbox({
        selector: '.glightbox3'
    });
    lightboxVideo.on('slide_changed', ({ prev, current }) => {
        console.log('Prev slide', prev);
        console.log('Current slide', current);

        const { slideIndex, slideNode, slideConfig, player } = current;

        if (player) {
            if (!player.ready) {
                // If player is not ready
                player.on('ready', (event) => {
                    // Do something when video is ready
                });
            }

            player.on('play', (event) => {
                console.log('Started play');
            });

            player.on('volumechange', (event) => {
                console.log('Volume change');
            });

            player.on('ended', (event) => {
                console.log('Video ended');
            });
        }
    });

    var lightboxInlineIframe = GLightbox({
        selector: '.glightbox4'
    });

    /* var exampleApi = GLightbox({ selector: null });
    exampleApi.insertSlide({
        href: 'https://picsum.photos/1200/800',
    });
    exampleApi.insertSlide({
        width: '500px',
        content: '<p>Example</p>'
    });
    exampleApi.insertSlide({
        href: 'https://www.youtube.com/watch?v=WzqrwPhXmew',
    });
    exampleApi.insertSlide({
        width: '200vw',
        content: document.getElementById('inline-example')
    });
    exampleApi.open(); */
</script>
        
        {% endblock main_content %}